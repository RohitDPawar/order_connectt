@{
    Layout = "_BlankLayout";
    ViewData["Title"] = "Login Pages";
}

@section VendorStyles {
    <link rel="stylesheet" href="~/vendor/libs/&#64;form-validation/form-validation.css" />
}

@section VendorScripts {
    <script src="~/vendor/libs/&#64;form-validation/popular.js"></script>
    <script src="~/vendor/libs/&#64;form-validation/bootstrap5.js"></script>
    <script src="~/vendor/libs/&#64;form-validation/auto-focus.js"></script>
}

@section PageStyles {
    <link rel="stylesheet" href="~/vendor/css/pages/page-auth.css">
}

@section PageScripts {
    <script src="~/js/pages-auth.js"></script>
}
@* ************** Content ************** *@


<div class="position-relative">
    <div class="authentication-wrapper authentication-basic container-p-y">
        <div class="authentication-inner py-6 mx-4">

            <!-- Login -->
            <div class="card p-7">
                <!-- Logo -->
                <div class="app-brand justify-content-center mt-5">
                    <a href="/" class="app-brand-link gap-3">
                        <span class="app-brand-logo demo">
                            <img src="~/img/icons/brands/brand_logo_com3.png" class="img-fluid" style="max-width:190px !important" />
                        </span>
                        <span class="app-brand-text demo text-heading fw-semibold">OMS</span>
                    </a>
                </div>
                <!-- /Logo -->

                <div class="card-body mt-1">
                    <h4 class="mb-1">Welcome to Order Connect! üëãüèª</h4>
                    <p class="mb-5">Please sign-in to your account and start the adventure</p>

                    @using (Html.BeginForm("CheckUserValidOrNot", "Login"))
                    {
                        <div class="form-floating form-floating-outline mb-5">
                            <input type="text" class="form-control mb-0" id="username" name="username" placeholder="Enter Your Phone Number" autofocus onclick="loadCredentials()">
                            <label for="username">Username</label>
                        </div>
                        <label id="WarnIdMessage" style="color: red; display: none"></label>
                        <div class="mb-5">
                            <div class="form-password-toggle">
                                <div class="input-group input-group-merge">
                                    <div class="form-floating form-floating-outline">
                                        <input type="password" id="password" class="form-control" name="password" placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;" aria-describedby="password" />
                                        <label for="password">Password</label>
                                    </div>
                                    <span class="input-group-text cursor-pointer"><i class="ri-eye-off-line ri-20px"></i></span>
                                </div>
                            </div>
                            <label id="WarnIdPassMessage" style="color:red;display:none"></label>
                        </div>
                        <div class="mb-5 pb-2 d-flex justify-content-between pt-2 align-items-center">
                            <div class="form-check mb-0">
                                <input class="form-check-input" type="checkbox" id="remember-me">
                                <label class="form-check-label" for="remember-me">
                                    Remember Me
                                </label>
                            </div>
                            <a href="/Auth/ForgotPasswordBasic" class="float-end mb-1">
                                <span>Forgot Password?</span>
                            </a>
                        </div>
                        <div class="mb-5">
                            <button class="btn btn-primary d-grid w-100" type="submit" onclick="return validateLoginForm()">login</button>
                        </div>
                    }
                </div>
            </div>
            <!-- /Login -->
            <img src="~/img/illustrations/tree-3.png" alt="auth-tree" class="authentication-image-object-left d-none d-lg-block">
            <img src="~/img/illustrations/auth-basic-mask-light.png" class="authentication-image d-none d-lg-block scaleX-n1-rtl" height="172" alt="triangle-bg" data-app-light-img="illustrations/auth-basic-mask-light.png" data-app-dark-img="illustrations/auth-basic-mask-dark.png">
            <img src="~/img/illustrations/tree.png" alt="auth-tree" class="authentication-image-object-right d-none d-lg-block">
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>

    

    $('document').ready(function ()
    {
      if('@TempData["Warning"]' != null)
      { //MessageForAlert('Please Select Customer...!!');
        $("#WarnIdPassMessage").css({ "display": "block", "color": "red" }).text('@TempData["Warning"]');
      }

     
    });

    function loadCredentials()
      {
          //console.log("Hi")
          const savedUsername = localStorage.getItem("username");
          //console.log(savedUsername)
          const savedPassword = localStorage.getItem("password");

          if (savedUsername && savedPassword) {
              document.getElementById("username").value = savedUsername;
              document.getElementById("password").value = savedPassword;
          }
      }
      // $('#togglePassword').on('click', function () {
      //     // Toggle the type attribute
      //     const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
      //     password.setAttribute('type', type);

      //     // Toggle the eye icon
      //     this.querySelector('i').classList.toggle('fa-eye');
      //     this.querySelector('i').classList.toggle('fa-eye-slash');
      // })

      function validateLoginForm() {
          if ($("#username").val() == "") {
              $("#WarnIdMessage").css({ "display": "block", "color": "red" }).text("Please Enter Username...!!");
              return false;
          }
          else if ($("#password").val() == "") {
              $("#WarnIdMessage").css({ "display": "none", "color": "red" }).text("");
              $("#WarnIdPassMessage").css({ "display": "block", "color": "red" }).text("Please Enter Password...!!");
              return false;
          }
          else {
              $("#WarnIdPassMessage").css({ "display": "none", "color": "red" }).text("");
              if ($('#remember-me').is(":checked")) {
                  const username = document.getElementById("username").value;
                  const password = document.getElementById("password").value;

                  // Store username and password in localStorage (for demonstration purposes only)
                  localStorage.setItem("username", username);
                  localStorage.setItem("password", password);
              }
              return true;
          }
      }
</script>
